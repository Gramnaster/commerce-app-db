json.status do
  json.code 200
  json.message "Fetched all products successfully"
end

json.data do
  json.array! @products do |product|
    json.id product.id
    json.title product.title
    json.description product.description
    json.price product.price
    json.product_image_url product.product_image_url
    
    json.product_category do
      json.id product.product_category.id
      json.title product.product_category.title
    end
    
    json.producer do
      json.id product.producer.id
      json.title product.producer.title
    end

    if product.promotion
      json.promotion do
        json.id product.promotion.id
        json.discount_amount product.promotion.discount_amount
      end
    else
      json.promotion nil
    end
    
    json.created_at product.created_at
    json.updated_at product.updated_at
  end
end
